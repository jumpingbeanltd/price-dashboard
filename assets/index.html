<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Product Dashboard v1.3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body class="bg-white text-gray-900 font-sans">
    <div class="w-fit mx-auto px-4 py-6">
        <h1 class="text-xl font-semibold mb-4">Product Dashboard</h1>

        <!-- Tab Navigation -->
        <div class="border-b border-gray-200 mb-4">
            <nav class="flex gap-4" aria-label="Tabs">
                <button id="tab-pricing" class="tab-btn active px-4 py-2 text-sm font-medium border-b-2 border-blue-500 text-blue-600" data-tab="pricing">
                    Product Pricing
                </button>
                <button id="tab-descriptions" class="tab-btn px-4 py-2 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="descriptions">
                    Product Descriptions
                </button>
            </nav>
        </div>

        <!-- Tab: Product Pricing -->
        <div id="panel-pricing" class="tab-panel">
            <!-- Controls Row -->
            <div class="flex items-center justify-between mb-4">
                <div class="flex gap-2 items-center">
                    <button id="push-selected-zoho" class="px-4 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed">
                        Push Selected to Zoho
                    </button>
                    <span id="zoho-status" class="text-sm text-gray-500"></span>
                </div>
                <div class="flex items-center gap-2">
                    <button id="exchange-rate-btn" class="px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span id="exchange-rate-text">EUR/GBP: ...</span>
                    </button>
                    <select id="rounding-select" class="px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                        <option value="0">No rounding</option>
                        <option value="0.05">Round €0.05</option>
                        <option value="0.10">Round €0.10</option>
                        <option value="0.50">Round €0.50</option>
                        <option value="1">Round €1.00</option>
                    </select>
                </div>
            </div>

            <!-- Pricing Table -->
            <div class="border border-gray-200 rounded-lg min-h-[600px]">
                <table class="text-sm w-full">
                    <thead class="bg-gray-50">
                        <!-- Filter Row -->
                        <tr class="border-b border-gray-200">
                            <th class="px-1 py-1 w-8">
                                <input type="checkbox" id="check-all" class="rounded border-gray-300">
                            </th>
                            <th class="px-1 py-1"><input type="text" id="filter-sku" placeholder="SKU" class="w-full px-1 py-0.5 text-xs border border-gray-300 rounded"></th>
                            <th class="px-1 py-1 w-16"></th>
                            <th class="px-1 py-1"><input type="text" id="filter-name" placeholder="Name" class="w-full px-1 py-0.5 text-xs border border-gray-300 rounded"></th>
                            <th class="px-1 py-1 w-20 bg-blue-50"></th>
                            <th class="px-1 py-1 w-20 bg-green-50"></th>
                            <th class="px-1 py-1 w-16 bg-orange-50"></th>
                            <th class="px-1 py-1 w-16 bg-purple-50"></th>
                            <th class="px-1 py-1 w-32 bg-indigo-50"></th>
                            <th class="px-1 py-1 w-16 bg-emerald-50"></th>
                            <th class="px-1 py-1 w-24 bg-gray-50"></th>
                        </tr>
                        <!-- Header Row -->
                        <tr class="border-b border-gray-300">
                            <th class="px-1 py-2 text-left w-8"></th>
                            <th data-sort="sku" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none sortable">
                                <span class="sort-indicator">↕</span>SKU
                            </th>
                            <th data-sort="stock" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none sortable w-16">
                                <span class="sort-indicator">↕</span>Stock
                            </th>
                            <th data-sort="name" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none sortable">
                                <span class="sort-indicator">↕</span>Name
                            </th>
                            <th data-sort="tradeId" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none sortable bg-blue-50 w-20">
                                <span class="sort-indicator">↕</span>Trade
                            </th>
                            <th data-sort="digitalId" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none sortable bg-green-50 w-20">
                                <span class="sort-indicator">↕</span>Digital
                            </th>
                            <th data-sort="diff" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none sortable bg-orange-50 w-16">
                                <span class="sort-indicator">↕</span>Diff
                            </th>
                            <th data-sort="markup" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none sortable bg-purple-50 w-16">
                                <span class="sort-indicator">↕</span>%
                            </th>
                            <th class="px-1 py-2 text-left font-medium text-gray-600 bg-indigo-50 w-32">
                                <div class="flex items-center gap-1">
                                    <span>Identity</span>
                                    <select id="identity-fill-all" class="text-xs px-1 py-0.5 border border-gray-300 rounded bg-white">
                                        <option value="">Fill...</option>
                                        <option value="digitalId">Digital €</option>
                                        <option value="+10">+10%</option>
                                        <option value="+20">+20%</option>
                                        <option value="+30">+30%</option>
                                        <option value="+50">+50%</option>
                                        <option value="+100">+100%</option>
                                    </select>
                                </div>
                            </th>
                            <th class="px-1 py-2 text-left font-medium text-gray-600 bg-emerald-50 w-16">Profit</th>
                            <th class="px-1 py-2 text-left font-medium text-gray-600 bg-gray-50 w-24">Zoho</th>
                        </tr>
                    </thead>
                    <tbody id="product-table-body">
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="flex items-center justify-between mt-4">
                <div id="page-info" class="text-sm text-gray-500"></div>
                <div class="flex gap-2">
                    <button id="prev-page" class="px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Previous</button>
                    <button id="next-page" class="px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Next</button>
                </div>
            </div>

            <div id="loading" class="text-center py-8 text-gray-500">Loading data...</div>
            <div id="stats" class="mt-4 text-xs text-gray-500"></div>
        </div>

        <!-- Tab: Product Descriptions -->
        <div id="panel-descriptions" class="tab-panel hidden">
            <!-- Controls Row -->
            <div class="flex items-center justify-between mb-4">
                <div class="flex gap-2 items-center">
                    <button id="rewrite-selected-btn" class="px-4 py-1.5 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed">
                        Rewrite Selected
                    </button>
                    <button id="sync-to-shopify" class="px-4 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed">
                        Sync to Shopify
                    </button>
                    <span id="shopify-status" class="text-sm text-gray-500"></span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="relative">
                        <button id="options-btn" class="px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 flex items-center gap-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>
                            Options
                        </button>
                        <div id="options-popover" class="hidden absolute right-0 top-full mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-40 p-3">
                            <div class="text-xs font-medium text-gray-700 mb-2">Rewrite Options</div>
                            <label class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:text-gray-900">
                                <input type="checkbox" id="opt-generate-uses" class="rounded border-gray-300">
                                <span>Generate product uses if empty</span>
                            </label>
                            <label class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:text-gray-900 mt-2">
                                <input type="checkbox" id="opt-generate-seo" class="rounded border-gray-300" checked>
                                <span>Generate HTML Title & Meta Desc</span>
                            </label>
                        </div>
                    </div>
                    <button id="prompt-settings-btn" class="px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                        Prompt
                    </button>
                    <button id="api-settings-btn" class="px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg>
                        API Keys
                    </button>
                </div>
            </div>

            <!-- Descriptions Table -->
            <div class="border border-gray-200 rounded-lg min-h-[600px]">
                <table class="text-sm w-full table-fixed">
                    <thead class="bg-gray-50">
                        <!-- Filter Row -->
                        <tr class="border-b border-gray-200">
                            <th class="px-1 py-1 w-8">
                                <input type="checkbox" id="desc-check-all" class="rounded border-gray-300">
                            </th>
                            <th class="px-1 py-1 w-24"><input type="text" id="desc-filter-sku" placeholder="SKU" class="w-full px-1 py-0.5 text-xs border border-gray-300 rounded"></th>
                            <th class="px-1 py-1 w-32"><input type="text" id="desc-filter-name" placeholder="Name" class="w-full px-1 py-0.5 text-xs border border-gray-300 rounded"></th>
                            <th class="px-1 py-1 w-32 bg-blue-50"></th>
                            <th class="px-1 py-1 w-32 bg-amber-50"></th>
                            <th class="px-1 py-1 w-32 bg-green-50"></th>
                            <th class="px-1 py-1 w-32 bg-purple-50"></th>
                            <th class="px-1 py-1 w-32 bg-rose-50"></th>
                            <th class="px-1 py-1 w-32 bg-cyan-50"></th>
                            <th class="px-1 py-1 w-20 bg-gray-50"></th>
                            <th class="px-1 py-1 w-20 bg-green-50"></th>
                        </tr>
                        <!-- Header Row -->
                        <tr class="border-b border-gray-300">
                            <th class="px-1 py-2 text-left w-8"></th>
                            <th data-sort="sku" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable w-24">
                                <span class="sort-indicator">↕</span>SKU
                            </th>
                            <th data-sort="name" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable w-32">
                                <span class="sort-indicator">↕</span>Name
                            </th>
                            <th data-sort="description" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable bg-blue-50 w-32">
                                <span class="sort-indicator">↕</span>Desc
                            </th>
                            <th data-sort="productUses" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable bg-amber-50 w-32">
                                <span class="sort-indicator">↕</span>Uses
                            </th>
                            <th data-sort="rewrittenDescription" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable bg-green-50 w-32">
                                <span class="sort-indicator">↕</span>Rewritten
                            </th>
                            <th data-sort="rewrittenProductUses" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable bg-purple-50 w-32">
                                <span class="sort-indicator">↕</span>Rew Uses
                            </th>
                            <th data-sort="htmlTitle" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable bg-rose-50 w-32">
                                <span class="sort-indicator">↕</span>Title
                            </th>
                            <th data-sort="metaDescription" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable bg-cyan-50 w-32">
                                <span class="sort-indicator">↕</span>Meta
                            </th>
                            <th data-sort="updatedAt" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable bg-gray-50 w-20">
                                <span class="sort-indicator">↕</span>Updated
                            </th>
                            <th data-sort="syncedAt" class="px-1 py-2 text-left font-medium text-gray-600 cursor-pointer hover:bg-gray-100 select-none desc-sortable bg-green-50 w-20">
                                <span class="sort-indicator">↕</span>Synced
                            </th>
                        </tr>
                    </thead>
                    <tbody id="descriptions-table-body">
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="flex items-center justify-between mt-4">
                <div id="desc-page-info" class="text-sm text-gray-500"></div>
                <div class="flex gap-2">
                    <button id="desc-prev-page" class="px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Previous</button>
                    <button id="desc-next-page" class="px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Next</button>
                </div>
            </div>

            <div id="desc-loading" class="text-center py-8 text-gray-500">Loading data...</div>
            <div id="desc-stats" class="mt-4 text-xs text-gray-500"></div>

            <!-- Sync Results -->
            <div id="sync-results" class="mt-4 hidden">
                <div id="sync-results-content" class="p-3 rounded-lg text-sm"></div>
            </div>
        </div>

        <!-- API Keys Modal -->
        <div id="api-keys-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
            <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">API Keys</h3>
                    <button id="close-api-modal" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
                <p class="text-xs text-gray-500 mb-4">Keys are stored locally in your browser. Select a default provider for rewrites.</p>
                <div class="space-y-4">
                    <div class="flex items-center gap-3">
                        <input type="radio" name="default-llm" id="default-claude" value="claude" class="text-blue-600">
                        <div class="flex-1">
                            <label for="default-claude" class="block text-sm font-medium text-gray-700">Claude API Key</label>
                            <input type="password" id="claude-api-key" placeholder="sk-ant-api03-..." class="mt-1 w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <input type="radio" name="default-llm" id="default-openai" value="openai" class="text-blue-600">
                        <div class="flex-1">
                            <label for="default-openai" class="block text-sm font-medium text-gray-700">OpenAI API Key</label>
                            <input type="password" id="openai-api-key" placeholder="sk-..." class="mt-1 w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <input type="radio" name="default-llm" id="default-gemini" value="gemini" class="text-blue-600">
                        <div class="flex-1">
                            <label for="default-gemini" class="block text-sm font-medium text-gray-700">Gemini API Key</label>
                            <input type="password" id="gemini-api-key" placeholder="AIza..." class="mt-1 w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <input type="radio" name="default-llm" id="default-tensorix" value="tensorix" class="text-blue-600">
                        <div class="flex-1">
                            <label for="default-tensorix" class="block text-sm font-medium text-gray-700">Tensorix API Key</label>
                            <input type="password" id="tensorix-api-key" placeholder="tx-..." class="mt-1 w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <select id="tensorix-model" class="mt-1 w-full px-2 py-2 text-xs border border-gray-300 rounded-md">
                                <option value="openai/gpt-oss-20b">GPT-OSS 20B — $0.03/$0.14 — ~$0.0001/rewrite</option>
                                <option value="openai/gpt-oss-120b">GPT-OSS 120B — $0.04/$0.20 — ~$0.0002/rewrite</option>
                                <option value="qwen/qwen3-coder-30b-a3b-instruct">Qwen3 Coder 30B — $0.06/$0.25 — ~$0.0002/rewrite</option>
                                <option value="qwen/qwen-2.5-72b-instruct">Qwen 2.5 72B — $0.07/$0.26 — ~$0.0002/rewrite</option>
                                <option value="meta-llama/llama-3.3-70b-instruct">Llama 3.3 70B — $0.10/$0.31 — ~$0.0003/rewrite</option>
                                <option value="qwen/qwen3-235b-a22b-2507">Qwen3 235B — $0.07/$0.46 — ~$0.0003/rewrite</option>
                                <option value="meta-llama/llama-4-maverick">Llama 4 Maverick 1M — $0.14/$0.68 — ~$0.0005/rewrite</option>
                                <option value="deepseek/deepseek-v3.2">DeepSeek v3.2 — $0.30/$0.50 — ~$0.0006/rewrite</option>
                                <option value="deepseek/deepseek-chat-v3.1">DeepSeek v3.1 — $0.20/$0.80 — ~$0.0007/rewrite</option>
                                <option value="minimax/minimax-m2">MiniMax M2 — $0.25/$1.00 — ~$0.0009/rewrite</option>
                                <option value="deepseek/deepseek-chat-v3-0324">DeepSeek v3 0324 — $0.30/$1.00 — ~$0.0009/rewrite</option>
                                <option value="z-ai/glm-4.6">GLM-4.6 — $0.40/$1.75 — ~$0.0015/rewrite</option>
                                <option value="minimax/minimax-m2.1">MiniMax M2.1 — $0.30/$2.40 — ~$0.0017/rewrite</option>
                                <option value="z-ai/glm-4.7">GLM-4.7 — $0.60/$2.20 — ~$0.0019/rewrite</option>
                                <option value="deepseek/deepseek-r1-0528">DeepSeek R1 Reasoning — $0.66/$2.60 — ~$0.0022/rewrite</option>
                                <option value="mistralai/mixtral-8x22b-instruct">Mixtral 8x22B — $2.00/$6.00 — ~$0.0056/rewrite</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="mt-6 flex justify-end gap-2">
                    <button id="clear-api-keys" class="px-4 py-2 text-sm text-red-600 hover:text-red-700">Clear All</button>
                    <button id="save-api-keys" class="px-4 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700">Save</button>
                </div>
            </div>
        </div>

        <!-- Prompt Settings Modal -->
        <div id="prompt-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
            <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-3xl mx-4 max-h-[90vh] flex flex-col overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Rewrite Prompt Settings</h3>
                    <button id="close-prompt-modal" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Main Rewrite Prompt</label>
                    <p class="text-xs text-gray-500 mb-2">Use {name}, {description}, and {productUses} as placeholders.</p>
                    <textarea id="rewrite-prompt" class="w-full p-3 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none h-32" placeholder="Enter your rewrite prompt..."></textarea>
                </div>
                <div class="border-t border-gray-200 pt-4 mt-2">
                    <h4 class="text-sm font-semibold text-gray-700 mb-3">SEO Rules</h4>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-rose-700 mb-1 flex items-center gap-2">
                            <span class="w-3 h-3 bg-rose-200 rounded"></span>HTML Title Rules
                        </label>
                        <textarea id="html-title-rules" class="w-full p-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-500 resize-none h-20" placeholder="e.g., Include brand name, max 60 chars..."></textarea>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-cyan-700 mb-1 flex items-center gap-2">
                            <span class="w-3 h-3 bg-cyan-200 rounded"></span>Meta Description Rules
                        </label>
                        <textarea id="meta-desc-rules" class="w-full p-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none h-20" placeholder="e.g., Include CTA, max 155 chars..."></textarea>
                    </div>
                </div>
                <div class="mt-4 flex justify-between items-center border-t border-gray-200 pt-4">
                    <button id="reset-prompt" class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800">Reset All to Default</button>
                    <div class="flex gap-2">
                        <button id="cancel-prompt" class="px-4 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                        <button id="save-prompt" class="px-4 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Text Editor Modal -->
        <div id="text-editor-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
            <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] flex flex-col">
                <div class="flex justify-between items-center mb-2">
                    <div>
                        <h3 id="editor-title" class="text-lg font-semibold">Edit Text</h3>
                        <p id="editor-sku" class="text-xs text-gray-500"></p>
                    </div>
                    <button id="close-editor-modal" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
                <textarea id="editor-textarea" class="flex-1 w-full p-3 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none min-h-[200px]" readonly></textarea>
                <div class="mt-4 flex justify-between items-center">
                    <span id="editor-char-count" class="text-xs text-gray-400"></span>
                    <div class="flex gap-2">
                        <button id="rewrite-editor" class="px-4 py-2 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                            Rewrite
                        </button>
                        <button id="close-editor-btn" class="px-4 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <footer class="mt-6 pt-4 border-t border-gray-200 text-xs text-gray-400 text-center">
            Product Dashboard v1.3 | <a href="/logs.html" class="text-blue-500 hover:underline">Zoho Logs</a> | <a href="/debug.html" class="text-blue-500 hover:underline">Debug Logs</a>
        </footer>
    </div>

    <script src="script.js"></script>
    <script>
        const TAB_STORAGE_KEY = 'price_dashboard_active_tab';

        function switchTab(tabId) {
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.classList.remove('active', 'border-blue-500', 'text-blue-600');
                b.classList.add('border-transparent', 'text-gray-500');
            });
            const btn = document.querySelector(`[data-tab="${tabId}"]`);
            if (btn) {
                btn.classList.add('active', 'border-blue-500', 'text-blue-600');
                btn.classList.remove('border-transparent', 'text-gray-500');
            }
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.add('hidden'));
            document.getElementById(`panel-${tabId}`)?.classList.remove('hidden');
            localStorage.setItem(TAB_STORAGE_KEY, tabId);
            if (tabId === 'descriptions') {
                window.dispatchEvent(new CustomEvent('descriptions-tab-activated'));
            }
        }

        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => switchTab(btn.dataset.tab));
        });

        document.addEventListener('DOMContentLoaded', () => {
            const savedTab = localStorage.getItem(TAB_STORAGE_KEY);
            if (savedTab) switchTab(savedTab);
        });
    </script>
</body>
</html>
